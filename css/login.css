/* 1. RESET Y CONFIGURACIÓN */
*, *:after, *:before {
    box-sizing: border-box;
}

:root {
  --primary-color: rgba(255, 77, 109, 0.8); /* Color rosado acorde a tu tema */
  --overlay-color: rgba(0, 0, 0, 0.9);      /* Fondo oscuro para el menú */
  --menu-speed: 0.75s;
}

/* Ocultamos el menú por defecto hasta que termine el login */
.menu-wrap {
    display: none; 
    position: fixed;
    top: 0;
    right: 0; /* Lo movemos a la derecha como en tu captura */
    z-index: 2000;
}

.menu-wrap .toggler {
  position: absolute;
  top: 0;
  right: 0;
  z-index: 22;
  cursor: pointer;
  width: 60px;
  height: 60px;
  opacity: 0;
}

.menu-wrap .hamburger {
  position: absolute;
  top: 0;
  right: 0;
  z-index: 21;
  width: 60px;
  height: 60px;
  padding: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Línea central del hamburger */
.menu-wrap .hamburger > div {
  position: relative;
  flex: none;
  width: 100%;
  height: 2px;
  background: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.4s ease;
}

/* Líneas superior e inferior */
.menu-wrap .hamburger > div::before,
.menu-wrap .hamburger > div::after {
  content: '';
  position: absolute;
  z-index: 21;
  top: -10px;
  width: 100%;
  height: 2px;
  background: inherit;
}

.menu-wrap .hamburger > div::after {
  top: 10px;
}

/* Animación al hacer click (Transformar en X) */
.menu-wrap .toggler:checked + .hamburger > div {
  transform: rotate(135deg);
}

.menu-wrap .toggler:checked + .hamburger > div::before,
.menu-wrap .toggler:checked + .hamburger > div::after {
  top: 0;
  transform: rotate(90deg);
}

/* El Overlay circular que se expande */
.menu-wrap .menu {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  visibility: hidden;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}

.menu-wrap .menu > div {
  background: var(--overlay-color);
  border-radius: 50%;
  width: 300vw; /* Expandido para cubrir todo el móvil */
  height: 300vw;
  display: flex;
  flex: none;
  align-items: center;
  justify-content: center;
  transform: scale(0);
  transition: all 0.4s ease;
}

.menu-wrap .toggler:checked ~ .menu {
  visibility: visible;
}

.menu-wrap .toggler:checked ~ .menu > div {
  transform: scale(1);
  transition-duration: var(--menu-speed);
}

/* Estilo de los enlaces */
.menu-wrap .menu > div > div {
  text-align: center;
  max-width: 90vw;
  opacity: 0;
  transition: opacity 0.4s ease;
}

.menu-wrap .toggler:checked ~ .menu > div > div {
  opacity: 1;
}

.menu-wrap .menu ul li {
  list-style: none;
  color: #fff;
  font-size: 1.8rem;
  padding: 1rem;
}

.menu-wrap .menu ul li a {
  color: inherit;
  text-decoration: none;
  transition: color 0.4s ease;
  font-family: 'Dancing Script', cursive; /* Manteniendo tu estilo romántico */
}

/* 2. TU LÓGICA MATEMÁTICA ORIGINAL (CONSERVADA AL 100%) */
:root {
    --on: 0; /* Controlado por JS */
    --cord: hsl(210, 0%, calc((40 + (var(--on, 0) * 50)) * 1%));
    --opening: hsl(50, calc((10 + (var(--on, 0) * 80)) * 1%), calc((20 + (var(--on, 0) * 70)) * 1%));
    --feature: #0a0a0a;
    --accent: 210;
    --tongue: #e06952;
    --base-top: hsl(var(--accent), 0%, calc((40 + (var(--on, 0) * 40)) * 1%));
    --base-side: hsl(var(--accent), 0%, calc((20 + (var(--on, 0) * 40)) * 1%));
    --post: hsl(var(--accent), 0%, calc((20 + (var(--on, 0) * 40)) * 1%));
    --b-1: hsla(45, 0%, calc((50 + (var(--on, 0) * 50)) * 1%), 0.85);
    --b-2: hsla(45, 0%, calc((20 + (var(--on, 0) * 30)) * 1%), 0.25);
    --b-3: hsla(45, 0%, calc((20 + (var(--on, 0) * 30)) * 1%), 0.5);
    --b-4: hsla(45, 0%, calc((20 + (var(--on, 0) * 30)) * 1%), 0.25);
    --l-1: hsla(45, calc((0 + (var(--on, 0) * 20)) * 1%), calc((50 + (var(--on, 0) * 50)) * 1%), 0.85);
    --l-2: hsla(45, calc((0 + (var(--on, 0) * 20)) * 1%), calc((50 + (var(--on, 0) * 50)) * 1%), 0.85);
    --shade-hue: 320;
    --t-1: hsl(var(--shade-hue), calc((0 + (var(--on, 0) * 20)) * 1%), calc((30 + (var(--on, 0) * 60)) * 1%));
    --t-2: hsl(var(--shade-hue), calc((0 + (var(--on, 0) * 20)) * 1%), calc((20 + (var(--on, 0) * 35)) * 1%));
    --t-3: hsl(var(--shade-hue), calc((0 + (var(--on, 0) * 20)) * 1%), calc((10 + (var(--on, 0) * 20)) * 1%));
    --glow-color: hsl(320, 40%, 45%);
    --glow-color-dark: hsl(320, 40%, 35%);
}

/* 3. ESTRUCTURA BASE (MOBILE FRIENDLY) */
body {
  margin: 0;
  padding: 0;
  display: flex;

  align-items: center;    /* Centra verticalmente */
  justify-content: flex-start; /* Centra horizontalmente */
  min-height: 100vh;      /* Ocupa toda la altura de la pantalla */
  background-color: #111;
  overflow: hidden;       /* Evita que aparezcan barras de scroll */
}

/* ESTA ES LA NUEVA CLASE: Se activa solo al entrar a la carta */
body.scroll-active {
    display: block !important;
    min-height: auto !important; /* Crucial: elimina el empuje vertical */
    height: auto !important;     /* Permite que el cuerpo crezca con el texto */
    overflow-y: auto !important; 
    overflow-x: hidden !important;
    padding-top: 0 !important;   /* Elimina cualquier espacio extra arriba */
}
/* 4. TEXTO GUÍA (ARRIBA Y LIMPIO) */
.guide-text {
  position: absolute;
  top: 30px; /* Se queda arriba, lejos de la lámpara */
  width: 100%;
  text-align: center;
  color: white;
  z-index: 20; /* Por encima de todo */
  pointer-events: none; /* Si Jennifer hace click ahí, traspasará a la lámpara */
}

/* Desaparece cuando la lámpara se enciende */
:root[style*="--on: 1"] .guide-text {
    opacity: 0;
    transform: translateY(-20px);
}

/* 5. CONTENEDOR DINÁMICO */

.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
  width: 100%;
}

/* El truco: Cuando se enciende, todo el grupo sube */
:root[style*="--on: 1"] .container {
    transform: translateY(-12%);
}

/* 6. LÓGICA DEL SVG (TU ORIGINAL) */
.lamp {
  position: relative;
  z-index: 2;
  height: 60vh; /* Tamaño inicial grande */
  transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Efecto elástico */
  transform-origin: top center; /* Para que al achicarse lo haga hacia arriba */
}

/* Esta nueva regla se activará desde el JS */
.lamp--small {
  height: 30vh; /* Se reduce a la mitad */
  transform: translateY(-180px); /* Sube un poco más hacia el borde superior */
}

.cord { stroke: var(--cord); }
.lamp__tongue { fill: var(--tongue); }
.lamp__hit { cursor: pointer; opacity: 0; }
.lamp__feature { fill: var(--feature); }
.lamp__stroke { stroke: var(--feature); }
.lamp__mouth, .lamp__light { opacity: var(--on, 0); }
.shade__opening { fill: var(--opening); }
.shade__opening-shade { opacity: calc(1 - var(--on, 0)); }
.post__body { fill: var(--post); }
.base__top { fill: var(--base-top); }
.base__side { fill: var(--base-side); }
.top__body { fill: var(--t-3); }

/* 7. FORMULARIO DE LOGIN (MEJORADO) */
.login-form {
  position: absolute;
  top: 55%; /* Aparecerá justo debajo de la cabeza de la lámpara */
  left: 50%;
  transform: translate(-50%, 0); /* Centrado horizontal */
  width: 90%;
  max-width: 320px;
  background: rgba(20, 20, 20, 0.9); /* Fondo oscuro elegante */
  padding: 20px;
  border-radius: 15px;
  border: 1px solid #ff4d6d;
  opacity: 0;
  pointer-events: none; /* Bloqueado cuando está apagado */
  transition: all 0.5s ease;
  z-index: 5;
}

/* Estado cuando la lámpara está ENCENDIDA */
.login-form.active {
  opacity: 1;
  pointer-events: all; /* Permite escribir */
  transform: translate(-50%, -90px); /* Un pequeño salto hacia abajo al aparecer */
}
/* ESTILOS INTERNOS DEL FORM */
.login-form h2 {
    color: #fff;
    font-size: 1.4rem;
    margin: 0 0 1.5rem 0;
    text-align: center;
    text-shadow: 0 0 8px var(--glow-color);
}

.form-group label {
    display: block;
    color: #aaa;
    font-size: 0.85rem;
    margin-bottom: 0.5rem;
}

.form-group input {
    width: 100%;
    padding: 12px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    color: #fff;
    font-size: 16px;
    margin-bottom: 10px;
}

.login-btn {
    width: 100%;
    padding: 14px;
    background: linear-gradient(135deg, var(--glow-color), var(--glow-color-dark));
    border: none;
    border-radius: 10px;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
}

/* OCULTOS TÉCNICOS */
.radio-controls, .cord--rig { display: none; }
#login-btn {
  background: #ff4d6d; /* Color rosa amor */
  color: white;
  border: none;
  padding: 12px;
  width: 100%;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  margin-top: 10px;
  box-shadow: 0 4px 15px rgba(255, 77, 109, 0.3);
  transition: transform 0.2s, background 0.2s;
}

#login-btn:hover {
  background: #ff758f;
  transform: scale(1.03); /* Se agranda un poquito al tocarlo */
}

#login-btn:active {
  transform: scale(0.95); /* Se hunde al hacer click */
}

#error-message {
    background: rgba(255, 77, 109, 0.15); /* Un rojo rosado muy suave */
    color: #ff4d6d;
    padding: 10px;
    border-radius: 8px;
    font-size: 0.9rem;
    text-align: center;
    margin-top: 15px;
    border: 1px solid rgba(255, 77, 109, 0.3);
    display: none; /* Se activa desde el JS */
    animation: shake 0.4s ease-in-out; /* La animación de sacudida */
}

/* Animación de sacudida para cuando Jennifer se equivoca */
@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-8px); }
    50% { transform: translateX(8px); }
    75% { transform: translateX(-8px); }
}


/* --- CÓDIGO DE LA LLUVIA UNIFICADO --- */
.drop {
    position: fixed !important;
    top: -50px;
    color: #FFFFFF !important; /* Blanco puro */
    font-size: 24px;
    font-family: Arial, sans-serif;
    white-space: nowrap;
    z-index: 99999 !important;
    animation: fall linear forwards;
    pointer-events: none;
}

.heart {
    position: fixed !important;
    top: -50px;
    color: #FF0000 !important; /* Rojo puro */
    font-size: 20px;
    z-index: 99999 !important;
    animation: fall linear forwards;
    pointer-events: none;
}

@keyframes fall {
    0% { transform: translateY(0); }
    100% { transform: translateY(110vh); }
}
/* --- ESTILOS DE LA CARTA PRINCIPAL --- */
.main-content {
    position: relative;
    z-index: 1000; /* Por encima del fondo pero debajo de la lluvia si quieres */
    width: 95%;
    max-width: 500px;
    margin: 40px auto;
    padding: 20px;
    background-color: rgba(253, 204, 156, 0.9); /* El color #fdcc9c con transparencia */
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    text-align: center;
    font-family: 'Dancing Script', cursive;
    left: 0; 
    right: 0;
}

.main-content h1 {
    font-size: 28px;
    color: #333;
}

#gif-container {
    width: 100%;
    margin: 20px 0;
}

#gif-container img {
    width: 100%;
    border-radius: 10px;
}

#mensaje {
    font-size: 22px;
    line-height: 1.5;
    color: #444;
    min-height: 80px;
}

#contador {
    margin-top: 30px;
    padding: 15px;
    background: rgba(255,255,255,0.3);
    border-radius: 15px;
    font-size: 18px;
    color: #222;
}

/* Permitir scroll profesional */
body.scroll-active {
    overflow-y: auto !important;
    overflow-x: hidden;
    background-color: black;
}

/* ============================================================
   NUEVA SECCIÓN: TOCADISCOS INTERACTIVO
   ============================================================ */
.music-player {
    position: fixed;
    top: 15px;
    left: 15px; /* Lado opuesto al menú hamburguesa */
    z-index: 1500;
    display: none; /* Se activa tras el login */
    cursor: pointer;
}

.disc-img {
    width: 65px; /* Tamaño ideal para móvil */
    height: 65px;
    border-radius: 50%;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
    transition: transform 0.3s ease;
}

/* Animación de rotación infinita */
@keyframes rotateDisc {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Clase para cuando el disco está girando (música sonando) */
.disc-spinning {
    animation: rotateDisc 3s linear infinite;
}

/* Efecto al presionar el disco */
.music-player:active .disc-img {
    transform: scale(0.9);
}

/* ============================================================
   ESCENARIO PARA APARTADOS INTERACTIVOS (FULLSCREEN)
   ============================================================ */
#section-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: black; /* Fondo base para las transiciones */
    z-index: 4000; /* Por encima de todo, incluso del menú */
    display: none; /* Escondido por defecto */
    overflow: hidden;
}

/* El botón de salida X que aparecerá a los 7 segundos */
.btn-cerrar-seccion {
    position: fixed;
    top: 20px;
    right: 20px;
    font-size: 35px;
    color: white;
    z-index: 4100;
    cursor: pointer;
    background: rgba(255, 255, 255, 0.2);
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    backdrop-filter: blur(5px);
    opacity: 0; /* Empieza invisible */
    transition: opacity 1s ease;
}

/* ============================================================
   APARTADO 1: AMOR (TE QUIERO) - ESTILOS
   ============================================================ */
/* ESTO SE QUEDA: Es para el mensaje "TE QUIERO" del centro */
.amor-message {
    font-family: 'Courier New', monospace;
    color: #ff69b4;
    font-size: 6rem;
    text-align: center;
    opacity: 0.8;
    text-shadow: 0 0 10px rgba(255, 105, 180, 0.7);
    z-index: 3;
}

/* ESTO SE QUEDA: Es el escenario principal */
/* --- CAPAS DE VISIBILIDAD (Z-INDEX) --- */
/* Nivel 1: El fondo negro */
#section-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: black;
    z-index: 9000; 
    display: none;
    overflow: hidden;
}
/* Nivel 2: La lluvia */
.drop, .heart {
    position: fixed !important;
    z-index: 9500 !important;
    pointer-events: none;
}

/* Nivel 3: El mensaje central */
.amor-message {
    font-family: 'Courier New', monospace;
    color: #ff69b4;
    font-size: clamp(3rem, 10vw, 6rem);
    text-align: center;
    opacity: 0.8;
    text-shadow: 0 0 10px rgba(255, 105, 180, 0.7);
    z-index: 9600;

    /* AJUSTE AQUÍ: Aumenta este número para bajarlo más */
    margin-top: 240px; 
}

/* Nivel 4: El botón de cerrar (Siempre arriba de todo) */
.btn-cerrar-seccion {
    position: fixed;
    top: 25px;
    right: 25px;
    z-index: 100000; /* Prioridad máxima */
    cursor: pointer;
    background: rgba(255, 255, 255, 0.2);
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    backdrop-filter: blur(5px);
    opacity: 0; 
    color: white;
    transition: opacity 1s;
}

/* Clase de apoyo para permitir el movimiento en la carta */
.can-scroll {
    overflow-y: auto !important;
}

/* Esto solo se activa cuando Jennifer entra a la carta */
body.scroll-active {
    display: block !important; /* Desactiva el 'flex' que causa el desplazamiento lateral */
    overflow-y: auto !important; /* Permite bajar para leer */
    overflow-x: hidden !important; /* Bloquea el movimiento a los lados */
}